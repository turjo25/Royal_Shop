{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Royal Shop{% endblock %}</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                50: "#eef2ff",
                100: "#e0e7ff",
                200: "#c7d2fe",
                300: "#a5b4fc",
                400: "#818cf8",
                500: "#6366f1",
                600: "#4f46e5",
                700: "#4338ca",
                800: "#3730a3",
                900: "#312e81"
              }
            },
            boxShadow: {
              soft: "0 10px 30px rgba(15, 23, 42, 0.08)"
            }
          }
        }
      }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
      body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    </style>

    {% block extra_head %}{% endblock %}
</head>
<body class="flex min-h-full flex-col bg-gray-50 text-gray-900">

    <nav class="sticky top-0 z-50 border-b border-gray-200/70 bg-white/80 backdrop-blur">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
                <div class="flex items-center gap-8">
                    <a href="{% url 'home' %}" class="group inline-flex items-center gap-2">
                        <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-brand-600 text-white shadow-sm ring-1 ring-brand-600/10">
                            <i class="bi bi-shop text-lg"></i>
                        </span>
                        <span class="text-lg font-semibold tracking-tight text-gray-900 group-hover:text-brand-700 transition">
                            Royal Shop
                        </span>
                    </a>

                    <div class="hidden sm:flex items-center gap-1">
                        <a href="{% url 'home' %}" class="rounded-lg px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition">
                            Home
                        </a>
                        <a href="{% url 'product_list' %}" class="rounded-lg px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition">
                            Shop
                        </a>
                    </div>
                </div>

                <div class="hidden sm:flex items-center gap-2">
                    {% if user.is_authenticated %}
                        <a href="{% url 'cart_detail' %}" class="group relative inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">
                            <span class="relative inline-flex">
                                <i class="bi bi-bag text-lg"></i>
                                {% if cart_items_count and cart_items_count > 0 %}
                                    <span class="absolute -top-2 -right-2 inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-red-500 px-1 text-[10px] font-bold leading-none text-white ring-2 ring-white">
                                        {{ cart_items_count }}
                                    </span>
                                {% endif %}
                            </span>
                            <span>Cart</span>
                        </a>

                        <a href="{% url 'profile' %}" class="inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">
                            <i class="bi bi-person text-lg"></i>
                            <span>Profile</span>
                        </a>

                        <a href="{% url 'logout' %}" class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 transition">
                            <i class="bi bi-box-arrow-right text-lg"></i>
                            <span>Logout</span>
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">
                            <i class="bi bi-box-arrow-in-right text-lg"></i>
                            <span>Login</span>
                        </a>
                        <a href="{% url 'register' %}" class="inline-flex items-center justify-center rounded-xl bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-brand-700 transition">
                            Create account
                        </a>
                    {% endif %}
                </div>

                <div class="flex items-center gap-2 sm:hidden">
                    <a href="{% url 'cart_detail' %}" class="relative inline-flex items-center justify-center rounded-xl p-2 text-gray-700 hover:bg-gray-100 transition" aria-label="Cart">
                        <i class="bi bi-bag text-lg"></i>
                        {% if cart_items_count and cart_items_count > 0 %}
                            <span class="absolute -top-1 -right-1 inline-flex h-5 min-w-5 items-center justify-center rounded-full bg-red-500 px-1 text-[10px] font-bold leading-none text-white ring-2 ring-white">
                                {{ cart_items_count }}
                            </span>
                        {% endif %}
                    </a>
                    <button type="button"
                            onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"
                            class="inline-flex items-center justify-center rounded-xl p-2 text-gray-700 hover:bg-gray-100 transition focus:outline-none focus:ring-2 focus:ring-brand-500/40"
                            aria-label="Open menu">
                        <i class="bi bi-list text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="hidden border-t border-gray-200/70 bg-white" id="mobile-menu">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-3">
                <div class="grid gap-1">
                    <a href="{% url 'home' %}" class="rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">Home</a>
                    <a href="{% url 'product_list' %}" class="rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">Shop</a>
                    <div class="my-2 h-px bg-gray-200/70"></div>
                    {% if user.is_authenticated %}
                        <a href="{% url 'profile' %}" class="rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">Profile</a>
                        <a href="{% url 'logout' %}" class="rounded-xl px-3 py-2 text-sm font-semibold text-red-600 hover:bg-red-50 transition">Logout</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">Login</a>
                        <a href="{% url 'register' %}" class="rounded-xl px-3 py-2 text-sm font-semibold text-brand-700 hover:bg-brand-50 transition">Create account</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <div class="mx-auto mt-4 max-w-7xl px-4 sm:px-6 lg:px-8">
        {% if messages %}
            {% for message in messages %}
                <div class="mb-4 flex items-start justify-between gap-4 rounded-2xl border p-4 shadow-sm
                    {% if message.tags == 'success' %} bg-green-50 text-green-800 border-green-200
                    {% elif message.tags == 'error' %} bg-red-50 text-red-800 border-red-200
                    {% elif message.tags == 'warning' %} bg-yellow-50 text-yellow-800 border-yellow-200
                    {% else %} bg-blue-50 text-blue-800 border-blue-200 {% endif %}">
                    <div class="flex items-start gap-3">
                        <div class="mt-0.5 text-lg">
                            {% if message.tags == 'success' %}
                                <i class="bi bi-check-circle"></i>
                            {% elif message.tags == 'error' %}
                                <i class="bi bi-x-circle"></i>
                            {% elif message.tags == 'warning' %}
                                <i class="bi bi-exclamation-triangle"></i>
                            {% else %}
                                <i class="bi bi-info-circle"></i>
                            {% endif %}
                        </div>
                        <div class="text-sm leading-6">{{ message }}</div>
                    </div>
                    <button onclick="this.parentElement.style.display='none'" class="rounded-lg p-1 text-gray-500 hover:bg-white/60 hover:text-gray-900 transition" aria-label="Dismiss">
                        <i class="bi bi-x text-xl"></i>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <main class="flex-1">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
            {% block content %}
            {% endblock %}
        </div>
    </main>

    <footer class="mt-auto border-t border-gray-200/70 bg-white">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
            <div class="grid gap-8 md:grid-cols-3">
                <div>
                    <div class="flex items-center gap-2">
                        <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-brand-600 text-white shadow-sm">
                            <i class="bi bi-shop"></i>
                        </span>
                        <span class="text-base font-semibold tracking-tight">Royal Shop</span>
                    </div>
                    <p class="mt-3 text-sm leading-6 text-gray-600">
                        Premium products, smooth checkout, and fast deliveryâ€”crafted with care.
                    </p>
                </div>

                <div class="grid grid-cols-2 gap-6 md:col-span-2 md:grid-cols-3">
                    <div>
                        <p class="text-sm font-semibold text-gray-900">Explore</p>
                        <div class="mt-3 grid gap-2 text-sm">
                            <a href="{% url 'home' %}" class="text-gray-600 hover:text-gray-900 transition">Home</a>
                            <a href="{% url 'product_list' %}" class="text-gray-600 hover:text-gray-900 transition">Shop</a>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-900">Account</p>
                        <div class="mt-3 grid gap-2 text-sm">
                            {% if user.is_authenticated %}
                                <a href="{% url 'profile' %}" class="text-gray-600 hover:text-gray-900 transition">Profile</a>
                                <a href="{% url 'cart_detail' %}" class="text-gray-600 hover:text-gray-900 transition">Cart</a>
                            {% else %}
                                <a href="{% url 'login' %}" class="text-gray-600 hover:text-gray-900 transition">Login</a>
                                <a href="{% url 'register' %}" class="text-gray-600 hover:text-gray-900 transition">Register</a>
                            {% endif %}
                        </div>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-900">Support</p>
                        <div class="mt-3 grid gap-2 text-sm text-gray-600">
                            <span class="inline-flex items-center gap-2"><i class="bi bi-shield-check"></i> Secure payments</span>
                            <span class="inline-flex items-center gap-2"><i class="bi bi-truck"></i> Fast delivery</span>
                            <span class="inline-flex items-center gap-2"><i class="bi bi-arrow-repeat"></i> Easy returns</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-10 flex flex-col gap-3 border-t border-gray-200/70 pt-6 sm:flex-row sm:items-center sm:justify-between">
                <p class="text-xs text-gray-500">&copy; 2025 Royal Shop. All rights reserved.</p>
                <p class="text-xs text-gray-500">Built with Django + Tailwind.</p>
            </div>
        </div>
    </footer>

    {% block extra_scripts %}{% endblock %}

</body>
</html>